#!/bin/bash
HERE="$(dirname "$(readlink -f "${0}")")"

# Set library path for bundled libraries (prepend, don't replace)
if [ -d "${HERE}/usr/lib" ]; then
    export LD_LIBRARY_PATH="${HERE}/usr/lib:${LD_LIBRARY_PATH}"
fi

# Set environment variables for desktop integration
export XDG_DATA_DIRS="${HERE}/usr/share:${XDG_DATA_DIRS}"
export XDG_DATA_HOME="${HOME}/.local/share"

# Ensure system audio libraries are still accessible
# AppImage uses system PulseAudio/ALSA, but may need bundled portaudio

# Run the application
exec "${HERE}/usr/bin/yap-mic-pass-ult-client" "$@"
